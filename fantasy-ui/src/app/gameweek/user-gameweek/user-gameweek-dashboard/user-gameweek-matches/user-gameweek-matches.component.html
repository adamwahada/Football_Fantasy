<div class="gameweek-list-container">
  <div class="content-wrapper">
    <div class="min-h-screen bg-gradient-to-b from-green-900/95 via-gray-900 to-black p-7 pt-20 text-green-50">
      <div class="max-w-6xl mx-auto">
        
        <header class="flex justify-between items-center mb-5 pt-6">
        <!-- Left side: icon + league name + gameweek inline -->
        <div class="flex items-center gap-3 flex-1">
            <img *ngIf="leagueIconUrl" [src]="leagueIconUrl" [alt]="leagueDisplayName" class="h-8 w-8 object-contain" />
            <h1 class="league-title">
            {{ leagueDisplayName }} - {{ selectedWeekNumber }}
            </h1>
        </div>
        </header>

        <!-- Subtitle and deadline below -->
        <div class="text-center mt-1 mb-0">
                    <p *ngIf="deadlineCountdown" class="text-xs text-yellow-300 mt-1 mb-0">
            Deadline: <span>{{ deadlineCountdown }}</span>
        </p>
        <p class="text-sm text-white/30">
            Click on teams to predict winners or draw. Tiebreak matches require exact score predictions.
        </p>

        </div>

        <!-- Matches Grid -->
        <main>
          <section>
            <article *ngFor="let match of matches" class="match-card" [class.tiebreaker]="match.isTiebreak">
              <!-- Tiebreak badge -->
              <div *ngIf="match.isTiebreak" class="tiebreak-badge">
                Tie-break
              </div>

              <!-- Main match content with three columns -->
              <div class="match-content">
                <!-- Home Team -->
                <div class="team home" 
                     [class.selected]="match.pick === 'HOME_WIN'"
                     (click)="selectPick(match, 'HOME_WIN')">
                  <img *ngIf="match.homeIconUrl" 
                       [src]="match.homeIconUrl" 
                       [alt]="match.homeTeam" 
                       class="team-icon" />
                  <span class="team-name">{{ match.homeTeam }}</span>
                </div>

                <!-- Draw Button -->
                <div class="pick-buttons">
                  <button class="pick-btn draw-btn" 
                          [class.selected]="match.pick === 'DRAW'" 
                          (click)="selectPick(match, 'DRAW')">
                    X
                  </button>
                </div>

                <!-- Away Team -->
                <div class="team away" 
                     [class.selected]="match.pick === 'AWAY_WIN'"
                     (click)="selectPick(match, 'AWAY_WIN')">
                  <img *ngIf="match.awayIconUrl" 
                       [src]="match.awayIconUrl" 
                       [alt]="match.awayTeam" 
                       class="team-icon" />
                  <span class="team-name">{{ match.awayTeam }}</span>
                </div>
              </div>

              <!-- Tiebreaker Controls at Bottom -->
              <div *ngIf="match.isTiebreak" class="tiebreak-controls">
                <input type="number" 
                       min="0" 
                       [(ngModel)]="match.scoreHome" 
                       class="score-input" 
                       placeholder="0" />
                <span class="vs">-</span>
                <input type="number" 
                       min="0" 
                       [(ngModel)]="match.scoreAway" 
                       class="score-input" 
                       placeholder="0" />
              </div>
            </article>
          </section>
        </main>
        <!-- Session Participation Modal -->
<app-session-participation-modal
  *ngIf="showParticipationModal"
  [isVisible]="showParticipationModal"
  [gameweekId]="selectedWeekNumber"
  [currentCompetition]="selectedCompetition"
  [predictions]="preparedPredictions"
  (participationSubmitted)="onParticipationSubmitted($event)"
  (modalClosed)="onModalClosed()"
>
</app-session-participation-modal>

<!-- Success/Error Messages -->
<div class="message-container" *ngIf="showMessage">
  <div [class]="'alert ' + (messageType === 'success' ? 'alert-success' : 'alert-error')">
    {{ message }}
  </div>
</div>

        <!-- Footer -->
        <footer class="flex justify-between items-center mt-5 text-white/30 text-sm">
            <div class="submit-btn-container">
                <button
                (click)="submitPredictions()"
                class="action-btn submit-btn">
                Confirm
                </button>
                <button
                (click)="cancelPredictions()"
                class="action-btn cancel-btn">
                Cancel
                </button>
                <button (click)="resetPredictions()" class="action-btn reset-btn">
                    Reset
                </button>
            </div>
        </footer>

      </div>
    </div>
  </div>
</div>