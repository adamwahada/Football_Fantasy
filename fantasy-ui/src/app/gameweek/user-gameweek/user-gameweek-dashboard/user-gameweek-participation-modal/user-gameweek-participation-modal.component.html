    <div class="modal-overlay" *ngIf="isVisible" (click)="onOverlayClick($event)">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>Rejoindre une Compétition</h2>
          <button class="close-btn" (click)="closeModal()">&times;</button>
        </div>
        
        <form [formGroup]="participationForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <label for="sessionType">Type de Session:</label>
            <select id="sessionType" formControlName="sessionType" class="form-control">
              <option value="">Sélectionner un type</option>
              <option value="ONE_VS_ONE">1 vs 1 </option>
              <option value="SMALL_GROUP">Best of 5</option>
              <option value="MEDIUM_GROUP">Best of 10 </option>
              <option value="OPEN_ROOM">Open Room</option>
            </select>
            <div class="error-message" *ngIf="participationForm.get('sessionType')?.invalid && participationForm.get('sessionType')?.touched">
              Veuillez sélectionner un type de session
            </div>
          </div>

          <div class="form-group">
            <label for="buyInAmount">Mise (€):</label>
            <input 
              type="number" 
              id="buyInAmount" 
              formControlName="buyInAmount" 
              class="form-control"
              min="0"
              step="0.01"
              placeholder="Ex: 5.00 (0 pour gratuit)">
            <div class="error-message" *ngIf="participationForm.get('buyInAmount')?.invalid && participationForm.get('buyInAmount')?.touched">
              Veuillez entrer un montant valide
            </div>
          </div>

          <div class="form-group">
            <label class="checkbox-container">
              <input type="checkbox" formControlName="isPrivate">
              <span class="checkmark"></span>
              Session privée
            </label>
          </div>

          <div class="form-group" *ngIf="participationForm.get('isPrivate')?.value">
            <label for="accessKey">Clé d'accès:</label>
            <input 
              type="text" 
              id="accessKey" 
              formControlName="accessKey" 
              class="form-control"
              placeholder="Entrez la clé d'accès">
            <div class="error-message" *ngIf="participationForm.get('accessKey')?.invalid && participationForm.get('accessKey')?.touched">
              La clé d'accès est requise pour les sessions privées
            </div>
          </div>

          <div class="prediction-summary" *ngIf="predictions.length > 0">
            <h4>Résumé de vos prédictions:</h4>
            <p>{{ predictions.length }} match(es) prédit(s)</p>
            <p *ngIf="tiebreakerCount > 0">{{ tiebreakerCount }} tie-break(s) inclus</p>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="closeModal()">
              Annuler
            </button>
            <button 
              type="submit" 
              class="btn btn-primary" 
              [disabled]="participationForm.invalid || isLoading">
              <span *ngIf="isLoading" class="spinner"></span>
              {{ isLoading ? 'Traitement...' : 'Confirmer et Rejoindre' }}
            </button>
          </div>
        </form>
      </div>
    </div>