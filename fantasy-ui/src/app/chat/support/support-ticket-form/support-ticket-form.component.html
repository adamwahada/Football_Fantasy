<div class="support-ticket-form-container">
  <div class="form-header">
    <div class="header-icon">üÜò</div>
    <h2>Cr√©er un ticket de support</h2>
    <p>D√©crivez votre probl√®me et nous vous aiderons rapidement</p>
  </div>

  <form [formGroup]="supportForm" (ngSubmit)="onSubmit()" class="support-form">
    
    <!-- S√©lection du type de support -->
    <div class="form-section">
      <label class="section-label">Type de probl√®me *</label>
      <div class="type-selector">
        <div 
          *ngFor="let type of supportTypes" 
          class="type-option"
          [class.selected]="selectedType === type.value"
          (click)="onTypeSelect(type.value)"
        >
          <div class="type-icon">{{ getSupportTypeIcon(type.value) }}</div>
          <div class="type-info">
            <div class="type-name">{{ type.displayName }}</div>
            <div class="type-description">
              {{ getTypeDescription(type.value) }}
            </div>
          </div>
          <div class="type-check" *ngIf="selectedType === type.value">‚úì</div>
        </div>
      </div>
      <div class="error-message" *ngIf="typeError">{{ typeError }}</div>
    </div>

    <!-- Sujet du ticket -->
    <div class="form-section">
      <label class="section-label" for="subject">Sujet *</label>
      <input 
        id="subject"
        type="text" 
        formControlName="subject"
        placeholder="Ex: Probl√®me de paiement avec ma carte"
        class="form-input"
        [class.error]="supportForm.get('subject')?.invalid && supportForm.get('subject')?.touched"
      >
      <div class="error-message" *ngIf="subjectError">{{ subjectError }}</div>
      <div class="char-counter">
        {{ supportForm.get('subject')?.value?.length || 0 }}/100
      </div>
    </div>

    <!-- Description d√©taill√©e -->
    <div class="form-section">
      <label class="section-label" for="description">Description d√©taill√©e *</label>
      <textarea 
        id="description"
        formControlName="description"
        placeholder="D√©crivez votre probl√®me en d√©tail. Plus vous donnez d'informations, plus nous pourrons vous aider rapidement..."
        class="form-textarea"
        rows="6"
        [class.error]="supportForm.get('description')?.invalid && supportForm.get('description')?.touched"
      ></textarea>
      <div class="error-message" *ngIf="descriptionError">{{ descriptionError }}</div>
      <div class="char-counter">
        {{ supportForm.get('description')?.value?.length || 0 }}/1000
      </div>
    </div>

    <!-- Conseils d'aide -->
    <div class="help-tips" *ngIf="selectedType">
      <div class="tips-header">
        <span class="tips-icon">üí°</span>
        <span>Conseils pour un ticket efficace</span>
      </div>
      <ul class="tips-list">
        <li *ngIf="selectedType === 'PAYMENT'">
          Incluez les d√©tails de votre transaction (montant, date, m√©thode de paiement)
        </li>
        <li *ngIf="selectedType === 'TECHNICAL'">
          D√©crivez les √©tapes qui m√®nent au probl√®me et votre environnement (navigateur, OS)
        </li>
        <li *ngIf="selectedType === 'ACCOUNT'">
          Pr√©cisez si le probl√®me concerne la connexion, les donn√©es personnelles ou les param√®tres
        </li>
        <li *ngIf="selectedType === 'GENERAL'">
          Soyez aussi pr√©cis que possible pour que nous puissions vous orienter vers la bonne √©quipe
        </li>
      </ul>
    </div>

    <!-- Boutons d'action -->
    <div class="form-actions">
      <button 
        type="button" 
        class="btn-secondary"
        (click)="onCancel()"
        [disabled]="isLoading"
      >
        Annuler
      </button>
      <button 
        type="submit" 
        class="btn-primary"
        [disabled]="supportForm.invalid || isLoading"
      >
        <span *ngIf="!isLoading">Cr√©er le ticket</span>
        <span *ngIf="isLoading" class="loading-spinner">
          <div class="spinner"></div>
          Cr√©ation en cours...
        </span>
      </button>
    </div>

  </form>
</div>
